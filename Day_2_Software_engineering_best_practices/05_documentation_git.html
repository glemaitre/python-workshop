<!--

Part about code style inspired on https://github.com/UWSEDS/LectureNotes/blob/master/11.Style_Doc_Communicate.pptx
Copyright (c) 2016, UWSEDS (BSD 2-clause "Simplified" License)

-->

<!DOCTYPE html>
<html>
  <head>
    <title>Version control with git</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../img/slides.css">
  </head>
  <body>
    <textarea id="source">

class: center, middle

### Software engineering best practices for scientists

# Version control with `git`

<p style="margin-bottom: 3cm;"></p>

.affiliations[
  ![:scale 80%](../img/logoUPSayPlusCDS_990.png)
]

---

# What version control is used for?

.center[![](../img/git/writing.png)]

---

count: false
# What version control is used for?

.center[![](../img/git/coding.png)]

---
count: false
# What version control is used for?

* Keep track of history

* Safe development of new features

* Swap between versions

* **Enable collaborative coding, writing, ...**

---

# One version control: `git`

### Terminology

* You use `git` to take snapshots of all the files in a folder. This folder is called a **repository** or **repo**.

* When you want to take a snapshot of a file or files, you create a **commit**.

* You can add more information about the changes youâ€™ve made in a **commit message**.

---

# One version control: `git`

### Terminology

.center[![:scale 90%](../img/git/commit_1.png)]

---
count: false
# One version control: `git`

### Terminology

.center[![:scale 90%](../img/git/commit_2.png)]

---
count: false
# One version control: `git`

### Terminology

.center[![:scale 90%](../img/git/commit_3.png)]


---

# Concepts of `git`

### Common commands

* `$ git init`: initialize a `git` repository.
* `$ git add file`: start tracking changes for a file.
* `$ git rm file`: stop tracking changes for a file.
* `$ git status`: get information regarding the status of the repository.
* `$ git commit`: take a snapshot of the changes of the files tracked.
* `$ git diff`: see the difference between different commit for the files.

---

# Concepts of `git`

### Branches

* `$ git branch name_branch`: create a new branch.

* `$ git checkout name_branch`: switch to a specific branch.

* `$ git merge another_branch`: bring the changes of `another_branch` into the current branch.

---

# Concepts of `git`

### Remote

* `$ git remote add origin git://some_remote.git`: add a remote named `origin` pointing somewhere.

* `$ git push origin name_branch`: push the local changes of `name_branch` into the remote `origin`.

* `$ git pull origin name_branch`: pull the changes from the remote `origin` and the branch `name_branch`.

---

# Concepts of `git`

### Summary

.center[![:scale 50%](../img/git/git-transport.png)]

---

# Extra materials

* Documentation: https://git-scm.com/doc

* `git` tutorials:
    * https://try.github.io/levels/1/challenges/1
    * http://learngitbranching.js.org/

---

# Install and configure `git`

### Install

You can refer to the following install
[instructions](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)

### Configure

Before starting using `git`, you will have configure it:

```bash
$ git config --global user.name "John Doe"
$ git config --global user.email johndoe@example.com
```

---

# Live example

### 1. Initialize

Go to `spectra_analysis` directory and initialize the `git` repository. It will create an hidden `.git` folder.

```bash
$ git init
```

### 2. Add barely minimum information

* `README.md`: contains information regarding the package.
* `.gitignore`: contains which file types to automatically skip. Examples can be found [there](https://github.com/github/gitignore). For us, we can select [`Python.gitignore`](https://github.com/github/gitignore/blob/master/Python.gitignore).

---

# Live example

### 3. Track files

We can start to track files.

```bash
$ git add .gitignore README.md
```

### 4. Check the status

You can use `status` to get information about the repository.

```bash
$ git status
```

---

# Live example

### 5. Commit changes

We can take a snapshot of state of the repository by committing.

```bash
$ git commit -m 'Initial commit'
```

### 6. Check the commit history

We can now check the history.

```bash
$ git log
```

---

# Live example

### 7. Add `spectral_analysis` module.

We can also add directly a folder.

```bash
$ git add spectral_analysis
$ git status
$ git diff
$ git commit -m 'Add spectral_analysis module'
$ git log
```

    </textarea>
<!--    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>-->
    <script src="../img/remark.min.js" type="text/javascript">
    </script>
    <script>
	    remark.macros.scale = function (percentage) {
          var url = this;
          return '<img src="' + url + '" style="width: ' + percentage + '" />';
      };
      remark.macros.scaleH = function (percentage) {
          var url = this;
          return '<img src="' + url + '" style="height: ' + percentage + '" />';
      };
      var slideshow = remark.create();
    </script>
  </body>
</html>
